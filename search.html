<script>
async function searchTickets() {
  const date = document.getElementById("date").value;
  const from = document.getElementById("from").value;
  const to = document.getElementById("to").value;
  const quota = document.getElementById("quota").value;

  const url = `https://train-confirm-backend-2.onrender.com/search?date=${date}&from=${from}&to=${to}`;
  const res = await fetch(url);
  const data = await res.json();

  let rows = "";
  data.train.quotas.forEach(q => {
    if (q.status === "CONFIRM" && (quota === "ALL" || q.quota === quota)) {
      rows += `
        <tr>
          <td>${data.train.name}</td>
          <td>${data.train.number}</td>
          <td>${q.quota}</td>
          <td>${data.train.class}</td>
          <td>${q.seatsAvailable}</td>
        </tr>`;
    }
  });

  document.getElementById("result").innerHTML = rows
    ? `<table>
         <tr><th>Train</th><th>No</th><th>Quota</th><th>Class</th><th>Seats</th></tr>
         ${rows}
       </table>`
    : `<div class="no-result">No Confirm Tickets Available</div>`;
}
</script>
